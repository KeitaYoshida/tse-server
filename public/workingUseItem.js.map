{"version":3,"sources":["webpack:///resources/js/components/sumup/workingUseItem.vue","webpack:///./resources/js/components/sumup/workingUseItem.vue?ae18","webpack:///./resources/js/components/sumup/workingUseItem.vue","webpack:///./resources/js/components/sumup/workingUseItem.vue?4552","webpack:///./resources/js/components/sumup/workingUseItem.vue?e479"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AAEA;AACA,WADA;AAEA,gBAFA;AAGA;AACA;AACA,eADA;AAEA,kBAFA;AAGA,gBACA;AAAA;AAAA;AAAA;AAAA,OADA,EAEA;AAAA;AAAA;AAAA;AAAA,OAFA,EAGA;AAAA;AAAA;AAAA;AAAA,OAHA,EAIA;AAAA;AAAA;AAAA;AAAA,OAJA,EAKA;AAAA;AAAA;AAAA;AAAA,OALA,CAHA;AAUA;AACA,yBADA;AAEA,eAFA;AAGA,yBAHA;AAIA;AAJA,OAVA;AAgBA;AAhBA;AAkBA,GAtBA;AAuBA,8BACA;AACA;AADA,IADA,CAvBA;AA4BA;AACA;AACA,GA9BA;AA+BA,6BACA,2DADA;AAEA,QAFA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA,mBAHA,GAGA,CAHA;AAAA;AAAA,uBAIA,UACA,oDADA,CAJA;;AAAA;AAIA,oBAJA;AAOA;AACA,uBARA,GAQA,EARA,EASA;AACA;;AACA;AACA;AACA;AACA,2CACA,6DADA;AAEA;AACA,mBALA;AAMA,iBAPA,EAXA,CAmBA;;AACA,qBApBA,GAoBA,EApBA;AAqBA;AACA;AACA;AACA;AAAA;AAAA;;AACA;AACA;AACA,qDADA;AAEA,yDAFA;AAGA,2DAHA;AAIA,yDAJA;AAKA,mEALA;AAMA,qEANA;AAOA;AAPA;AASA,uBAVA,MAUA;AACA;AACA,0CACA,+DADA;AAEA;;AACA,yCACA,+DADA;AAEA,qBAnBA;AAoBA,mBArBA;AAsBA,iBAvBA;AAwBA,mCA7CA,CA8CA;AACA;AACA;AACA;AACA;AACA;AACA;;AApDA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAsDA,MAtDA,cAsDA,CAtDA,EAsDA;AACA;AACA,KAxDA;AAyDA,YAzDA,sBAyDA;AACA,gBACA,mCACA,0BADA,GAEA,GAFA,GAGA,uCAJA,EADA,CAOA;AACA;AAjEA;AA/BA,G;;;;;;;;;;;;ACvCA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,SAAS,qBAAqB,EAAE;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,uCAAuC;AACnE;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA,6BAA6B,SAAS,gCAAgC,EAAE;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,gCAAgC;AAC5D;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,8BAA8B,gCAAgC;AAC9D;AACA;AACA;AACA,8BAA8B,gCAAgC;AAC9D;AACA;AACA;AACA,8BAA8B,gCAAgC;AAC9D;AACA;AACA;AACA,8BAA8B,gCAAgC;AAC9D;AACA;AACA;AACA,8BAA8B,gCAAgC;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC9GA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyG;AACvC;AACL;;;AAG7D;AACgG;AAChG,gBAAgB,2GAAU;AAC1B,EAAE,oFAAM;AACR,EAAE,qGAAM;AACR,EAAE,8GAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACyG;AACtD;AACA;AACO;AACK;AACV;AACrD,oGAAiB,aAAa,sEAAI,CAAC,sEAAI,CAAC,mFAAU,CAAC,wFAAU,CAAC,yEAAK,CAAC;;;AAGpE;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;AChDf;AAAA;AAAA,wCAA0P,CAAgB,oSAAG,EAAC,C;;;;;;;;;;;;ACA9Q;AAAA;AAAA;AAAA;AAAA;AAAA","file":"workingUseItem.js","sourcesContent":["<template>\n  <v-app>\n    <v-container grid-list-xs>\n      <template v-if=\"totalPrice!==0\">\n        <v-btn icon color=\"primary\" flat @click=\"$router.go(-1)\">\n          <v-icon>fas fa-angle-double-left</v-icon>\n        </v-btn>\n        <v-btn color=\"primary\" outline>{{workdata.model.model_code}}</v-btn>\n        <v-btn\n          color=\"primary\"\n          outline\n          :to=\"'/process/' + $route.params.work_id\"\n        >{{workdata.worklist_code}}</v-btn>\n        <v-btn color=\"primary\" outline @click=\"setPrice()\">金額：{{ totalPrice.toLocaleString() }}</v-btn>\n      </template>\n      <v-data-table\n        :headers=\"headers\"\n        :items=\"items\"\n        hide-actions\n        class=\"elevation-1 mt-3\"\n        :pagination.sync=\"pagination\"\n        item-key=\"item_id\"\n        :loading=\"items.length===0\"\n      >\n        <template v-slot:items=\"props\" :class=\"rt(props)\">\n          <td class=\"text-xs-center\">{{props.item.item_code }}</td>\n          <td class=\"text-xs-center\">{{props.item.item_model }}</td>\n          <td class=\"text-xs-center\">{{props.item.item_name }}</td>\n          <td class=\"text-xs-center\">{{props.item.count }}</td>\n          <td class=\"text-xs-center\">{{props.item.total_price.toLocaleString() }}</td>\n        </template>\n      </v-data-table>\n    </v-container>\n  </v-app>\n</template>\n\n<script>\nimport { mapState, mapActions } from \"vuex\";\n\nexport default {\n  props: [],\n  components: {},\n  data: function() {\n    return {\n      items: [],\n      workdata: {},\n      headers: [\n        { text: \"品目コード\", value: \"item_code\", align: \"center\" },\n        { text: \"形式\", value: \"item_model\", align: \"center\" },\n        { text: \"品名\", value: \"item_name\", align: \"center\" },\n        { text: \"数量\", value: \"count\", align: \"center\" },\n        { text: \"金額\", value: \"total_price\", align: \"center\" }\n      ],\n      pagination: {\n        descending: false,\n        page: 1,\n        rowsPerPage: 1000,\n        sortBy: \"item_name\"\n      },\n      totalPrice: 0\n    };\n  },\n  computed: {\n    ...mapState({\n      target: \"target\"\n    })\n  },\n  created: function() {\n    this.init();\n  },\n  methods: {\n    ...mapActions([]),\n    async init() {\n      const Fin = 2;\n      let list = await axios.get(\n        \"/db/workdata/process/\" + this.$route.params.work_id\n      );\n      this.workdata = list.data[0];\n      let process = {};\n      // console.log(list.data[0]);\n      // worklist -> serial[] -> process[]\n      list.data[0].serials.forEach(serial => {\n        serial.process.forEach(p => {\n          if (p.process_status === Fin) {\n            process[p.work_id] =\n              process[p.work_id] === undefined ? 1 : process[p.work_id] + 1;\n          }\n        });\n      });\n      // console.log(process);\n      let items = [];\n      Object.keys(process).forEach(pid => {\n        axios.get(\"/db/workdata/cmpt/items/\" + pid).then(res => {\n          res.data.forEach(item => {\n            let tar = items.filter(ar => ar.item_id === item.items.item_id);\n            if (tar.length === 0) {\n              items.push({\n                item_id: item.items.item_id,\n                item_code: item.items.item_code,\n                item_model: item.items.item_model,\n                item_name: item.items.item_name,\n                item_price: Number(item.items.item_price),\n                count: Number(item.item_use) * process[pid],\n                total_price: Number(item.items.item_price) * process[pid]\n              });\n            } else {\n              tar.count = tar.count + item.item_use * process[pid];\n              tar.total_price =\n                tar.total_price + item.item_use * tar.item_price * process[pid];\n            }\n            this.totalPrice =\n              this.totalPrice + Number(item.items.item_price) * process[pid];\n          });\n        });\n      });\n      this.items = items;\n      // console.log(this.items);\n      // console.log(items);\n      // this.items = Object.keys(items).map(key => {\n      //   console.log(key);\n      //   return items[key];\n      // });\n      // console.log(this.items);\n    },\n    rt(i) {\n      console.log(i);\n    },\n    setPrice() {\n      axios.get(\n        \"/db/workdata/set/useitemprice/\" +\n          this.$route.params.work_id +\n          \"/\" +\n          Math.round(this.totalPrice * 100) / 100\n      );\n      // .then(res => {});\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n</style>","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"v-app\",\n    [\n      _c(\n        \"v-container\",\n        { attrs: { \"grid-list-xs\": \"\" } },\n        [\n          _vm.totalPrice !== 0\n            ? [\n                _c(\n                  \"v-btn\",\n                  {\n                    attrs: { icon: \"\", color: \"primary\", flat: \"\" },\n                    on: {\n                      click: function($event) {\n                        return _vm.$router.go(-1)\n                      }\n                    }\n                  },\n                  [_c(\"v-icon\", [_vm._v(\"fas fa-angle-double-left\")])],\n                  1\n                ),\n                _vm._v(\" \"),\n                _c(\"v-btn\", { attrs: { color: \"primary\", outline: \"\" } }, [\n                  _vm._v(_vm._s(_vm.workdata.model.model_code))\n                ]),\n                _vm._v(\" \"),\n                _c(\n                  \"v-btn\",\n                  {\n                    attrs: {\n                      color: \"primary\",\n                      outline: \"\",\n                      to: \"/process/\" + _vm.$route.params.work_id\n                    }\n                  },\n                  [_vm._v(_vm._s(_vm.workdata.worklist_code))]\n                ),\n                _vm._v(\" \"),\n                _c(\n                  \"v-btn\",\n                  {\n                    attrs: { color: \"primary\", outline: \"\" },\n                    on: {\n                      click: function($event) {\n                        return _vm.setPrice()\n                      }\n                    }\n                  },\n                  [_vm._v(\"金額：\" + _vm._s(_vm.totalPrice.toLocaleString()))]\n                )\n              ]\n            : _vm._e(),\n          _vm._v(\" \"),\n          _c(\"v-data-table\", {\n            staticClass: \"elevation-1 mt-3\",\n            attrs: {\n              headers: _vm.headers,\n              items: _vm.items,\n              \"hide-actions\": \"\",\n              pagination: _vm.pagination,\n              \"item-key\": \"item_id\",\n              loading: _vm.items.length === 0\n            },\n            on: {\n              \"update:pagination\": function($event) {\n                _vm.pagination = $event\n              }\n            },\n            scopedSlots: _vm._u([\n              {\n                key: \"items\",\n                fn: function(props) {\n                  return [\n                    _c(\"td\", { staticClass: \"text-xs-center\" }, [\n                      _vm._v(_vm._s(props.item.item_code))\n                    ]),\n                    _vm._v(\" \"),\n                    _c(\"td\", { staticClass: \"text-xs-center\" }, [\n                      _vm._v(_vm._s(props.item.item_model))\n                    ]),\n                    _vm._v(\" \"),\n                    _c(\"td\", { staticClass: \"text-xs-center\" }, [\n                      _vm._v(_vm._s(props.item.item_name))\n                    ]),\n                    _vm._v(\" \"),\n                    _c(\"td\", { staticClass: \"text-xs-center\" }, [\n                      _vm._v(_vm._s(props.item.count))\n                    ]),\n                    _vm._v(\" \"),\n                    _c(\"td\", { staticClass: \"text-xs-center\" }, [\n                      _vm._v(_vm._s(props.item.total_price.toLocaleString()))\n                    ])\n                  ]\n                }\n              }\n            ])\n          })\n        ],\n        2\n      )\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./workingUseItem.vue?vue&type=template&id=7c00c8c6&scoped=true&\"\nimport script from \"./workingUseItem.vue?vue&type=script&lang=js&\"\nexport * from \"./workingUseItem.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7c00c8c6\",\n  null\n  \n)\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib/components/VApp';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDataTable } from 'vuetify/lib/components/VDataTable';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\ninstallComponents(component, {VApp,VBtn,VContainer,VDataTable,VIcon})\n\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/third/www/tse-server/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('7c00c8c6')) {\n      api.createRecord('7c00c8c6', component.options)\n    } else {\n      api.reload('7c00c8c6', component.options)\n    }\n    module.hot.accept(\"./workingUseItem.vue?vue&type=template&id=7c00c8c6&scoped=true&\", function () {\n      api.rerender('7c00c8c6', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"resources/js/components/sumup/workingUseItem.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vuetify-loader/lib/loader.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./workingUseItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vuetify-loader/lib/loader.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./workingUseItem.vue?vue&type=script&lang=js&\"","export * from \"-!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/vuetify-loader/lib/loader.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./workingUseItem.vue?vue&type=template&id=7c00c8c6&scoped=true&\""],"sourceRoot":""}